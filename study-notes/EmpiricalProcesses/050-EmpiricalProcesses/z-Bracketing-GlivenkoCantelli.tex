
          %%%%% ~~~~~~~~~~~~~~~~~~~~ %%%%%

\section{The Bracketing Glivenko-Cantelli Theorem}
\setcounter{theorem}{0}
\setcounter{equation}{0}

%\cite{vanDerVaart1996}
%\cite{Kosorok2008}

%\renewcommand{\theenumi}{\alph{enumi}}
%\renewcommand{\labelenumi}{\textnormal{(\theenumi)}$\;\;$}
\renewcommand{\theenumi}{\roman{enumi}}
\renewcommand{\labelenumi}{\textnormal{(\theenumi)}$\;\;$}

          %%%%% ~~~~~~~~~~~~~~~~~~~~ %%%%%

\begin{definition}[Bracketing Number, Definition 2.1.6, p.83, \cite{vanDerVaart1996}]
\mbox{}\vskip 0.1cm
\noindent
Suppose:
\begin{itemize}
\item
	$(\Omega,\mathcal{A},\mu)$ is a probability space.
\item
	$(\D,\mathcal{D})$\, is a measurable space.
	$\mathcal{M}(\D,\mathcal{D})$ is the set of all measures defined on $(\D,\mathcal{D})$.
\item
	$X : (\Omega,\mathcal{A},\mu) \longrightarrow (\D,\mathcal{D})$
	is a $(\D,\mathcal{D})$-valued random variable defined on
	$(\Omega,\mathcal{A},\mu)$.
	\vskip 0.1cm
	$P_{X} \in \mathcal{M}(\D,\mathcal{D})$ is the probability measure
	on $(\D,\mathcal{D})$ induced by $X$.
\item
	$r \in [1,\infty)$, and $\mathcal{O}$ denotes the Borel $\sigma$-algebra of $\Re$, and
	\begin{equation*}
	L^{r}(P_{X})
	\;\; := \;\;
		\left\{\;\,
			g : \D \overset{{\color{white}.}}{\longrightarrow} \Re
		\;\;\left\vert\;
			\begin{array}{c}
			\textnormal{$g$ is $(\mathcal{D},\mathcal{O})$-measurable\,, and} \\
			\mathlarger{\int}_{\,\D}\;\, \vert\,g(x)\,\vert^{r} \;\d P_{X}(x)
				\;\overset{{\color{white}1}}{=}\;
				\mathlarger{\,\int}_{\,\Omega}\;\, \vert\,g \circ X\,\vert^{r} \;\d\mu \;<\; \infty
			\end{array}
		\right.
		\right\}
	\end{equation*}
	For each \,$g \in L^{r}(P_{X})$,
	\begin{equation*}
	\Vert\,g\,\Vert_{r,P_{X}} 
	\;\; := \;\;
		\left(\,\int_{\,\D}\;\, \vert\,g(x)\,\vert^{r} \;\d P_{X}(x)\,\right)^{1/r}
	\; = \;\;
		\left(\,\int_{\,\Omega}\;\, \vert\,g \circ X\,\vert^{r} \;\d\mu\,\right)^{1/r}
	\end{equation*}
	Note that $\Vert\cdot\Vert_{r,P_{X}}$ defines a norm on $L^{r}(P_{X})$. 
\item
	$\mathcal{F} \,\subset\, L^{r}(P_{X})$.
\end{itemize}
We make the following definitions:
\begin{enumerate}
\item
	For \,$l, u \in L^{r}(P_{X})$\, with
	\begin{equation*}
	P_{X}\!\left(\,l \overset{{\color{white}.}}{\leq} u\,\right)
	\;\;=\;\;
		P_{X}\!\left(\,\left\{\,\left. x\overset{{\color{white}.}}{\in}\D \;\,\right\vert\; l(x) \,\leq\, u(x)\,\right\}\,\right)
	\;\;=\;\;
		\mu\!\left(\,\left\{\,
			\left.
			\omega\overset{{\color{white}.}}{\in}\Omega
			\;\,\right\vert\;
			l(X(\omega)) \,\leq\, u(X(\omega))
		\,\right\}\,\right)
	\;=\; 1\,,
	\end{equation*}
	the \underline{\textbf{bracket $[\,l,u\,] \,\subset\,L^{r}(P_{X})$}} is defined to be:
	\begin{equation*}
	[\,l,u\,]
	\;\; := \;\;
		\left\{\;
		\left.
			g \overset{{\color{white}.}}{\in} L^{r}(P_{X})
		\;\;\right\vert\;\,
			P_{X}(\,l \,\overset{{\color{white}.}}{\leq}\, g \,\leq\, u\,) \,=\, 1
		\;\right\}.
	\end{equation*}
\item
	For $\varepsilon > 0$, an \underline{\textbf{$\varepsilon$-bracket}{\color{white}j}}
	is a bracket \,$[\,l,u\,] \,\subset\, L^{r}(P_{X})$\, such that
	\,$\Vert\,u-l\,\Vert_{r,P_{X}} \,<\,\varepsilon$.
\item
	The \underline{\textbf{bracketing number
	\,$N_{[\,]}\!\left(\,\varepsilon,\mathcal{F},L^{r}(P_{X})\,\right)$}}
	is defined as follows:
	\begin{equation*}
	N_{[\,]}\!\left(\,\varepsilon,\mathcal{F},L^{r}(P_{X})\,\right)
	\;\; := \;\;
		\min\left\{\;
			n \overset{{\color{white}.}}{\in} \N
		\;\;\left\vert\;
			\begin{array}{c}
				\exists\;\; \textnormal{$\varepsilon$-brackets}\;\;
				[\,l_{1},u_{1}\,],\; \ldots\,,\; [\,l_{n},u_{n}\,] \,\subset\, L^{r}(P_{X})
			\\
				\overset{{\color{white}1}}{\textnormal{such that}}\;\;
				\mathcal{F} \,\subset \overset{n}{\underset{i=1}{\bigcup}}\,[\,l_{i},u_{i}\,]
			\end{array}
		\right.
		\right\}
	\end{equation*}
\end{enumerate}
\end{definition}

          %%%%% ~~~~~~~~~~~~~~~~~~~~ %%%%%

\begin{theorem}[The Bracketing Glivenko-Cantelli Theorem, Theorem 2.4.1, p.122, \cite{vanDerVaart1996}]
\mbox{}\vskip 0.1cm
\noindent
Suppose:
\begin{itemize}
\item
	$(\Omega,\mathcal{A},\mu)$ is a probability space.
\item
	$(\D,\mathcal{D})$\, is a measurable space.
	$\mathcal{M}(\D,\mathcal{D})$ is the set of all measures defined on $(\D,\mathcal{D})$.
\item
	$X : (\Omega,\mathcal{A},\mu) \longrightarrow (\D,\mathcal{D})$
	is a $(\D,\mathcal{D})$-valued random variable defined on
	$(\Omega,\mathcal{A},\mu)$.
\item
	$P_{X} \in \mathcal{M}(\D,\mathcal{D})$ is the probability measure
	on $(\D,\mathcal{D})$ induced by $X$.
\item
	$\mathcal{F} \,\subset\, L^{1}(P_{X})$.
\end{itemize}
Then,
\begin{equation*}
	\begin{array}{c}
	N_{[\,]}\!\left(\,\varepsilon,\mathcal{F},L^{1}(P_{X})\,\right) \,<\, \infty\,, \\
	\overset{{\color{white}.}}{\textnormal{for each $\varepsilon > 0$}}
	\end{array}
\quad\Longrightarrow\quad
	\textnormal{$\mathcal{F}$\, is an $X$-Glivenko-Cantelli class}\,.
\end{equation*}
\end{theorem}
\proof
\vskip 0.3cm
\noindent
\textbf{Claim 1:}\quad For each $\varepsilon > 0$, we have
\begin{equation*}
\mu\!\left(\,\left\{\;
	\omega\in\Omega
\;\left\vert\;
	-\,\varepsilon
	\,\leq\,
	\underset{n\rightarrow\infty}{\liminf}
	\left(\;\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}\,\right)^{*}(\omega)
	\,\leq\,
	\underset{n\rightarrow\infty}{\limsup}
	\left(\;\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}\,\right)^{*}(\omega)
	\,\leq\,
	\varepsilon
\right.
\;\right\}\right)
\;=\; 1\,.
\end{equation*}
Proof of Claim 1:\quad
Let $\varepsilon > 0$ be given.
Since $N_{[\,]}\!\left(\,\varepsilon,\mathcal{F},L^{1}(P_{X})\,\right) \,<\, \infty$,
there exist $\varepsilon$-brackets $[\,l_{1},u_{1}\,],\ldots,[\,l_{k},u_{k}\,]\in L^{1}(P_{X})$
such that $\mathcal{F} \,\subset \overset{k}{\underset{j=1}{\bigcup}}\,[\,l_{j},u_{j}\,]$.
Note that, since each $[\,l_{j},u_{j}\,]$ is an $\varepsilon$-bracket, we have
\begin{equation*}
E\!\left[\;\vert\, u_{j} \circ X \overset{{\color{white}.}}{-} l_{j} \circ X \,\vert\;\right]
\;\; = \;\; \mathlarger{\int}_{\,\D}\;\vert\,u_{j}(x) - l_{j}(x)\,\vert\;\d P_{X}(x)
\;\; = \;\; \left\Vert\; u_{j} \overset{{\color{white}.}}{-} l_{j} \;\right\Vert_{1,P_{X}}
\;\; < \;\; \varepsilon\,.
\end{equation*}
For each $f \in \mathcal{F}$, we have $f \in [\,l_{j},u_{j}\,]$, for some $j = 1,2,\ldots,k$.
Hence, for $\mu$-almost every $\omega\in\Omega$,
\begin{eqnarray*}
\Delta(X,n)(\omega)[\,f\,]\,\overset{{\color{white}+}}{-}\,P_{X}[\,f\,]
& = &
	\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(f \circ X_{i})(\omega)
	\,\overset{{\color{white}+}}{-}\,
	E[\,f \circ X\,]
\\
& \leq &
	\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})(\omega)
	\,\overset{{\color{white}+}}{-}\,
	E[\,f \circ X\,]
\\
& = &
	\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})(\omega)
	\,\overset{{\color{white}+}}{-}\,
	E[\,u_{j} \circ X\,]
	\,\overset{{\color{white}+}}{+}\,
	E[\,u_{j} \circ X\,]
	\,\overset{{\color{white}+}}{-}\,
	E[\,f \circ X\,]
\\
& \leq &
	\underset{1\leq j \leq k}{\max}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,u_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{+}\,
	E\!\left[\, u_{j} \circ X \overset{{\color{white}.}}{-} f \circ X\,\right]
\\
& \leq &
	\underset{1\leq j \leq k}{\max}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,u_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{+}\,
	E\!\left[\; \vert\, u_{j} \circ X \overset{{\color{white}.}}{-} f \circ X \,\vert \;\right]
\\
& \leq &
	\underset{1\leq j \leq k}{\max}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,u_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{+}\,
	E\!\left[\; \vert\, u_{j} \circ X \overset{{\color{white}.}}{-} l_{j} \circ X \,\vert \;\right]
\\
& \leq &
	\underset{1\leq j \leq k}{\max}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,u_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{+}\,
	\varepsilon\,.
\end{eqnarray*}
Similarly, for $\mu$-almost every $\omega\in\Omega$,
\begin{eqnarray*}
\Delta(X,n)(\omega)[\,f\,]\,\overset{{\color{white}+}}{-}\,P_{X}[\,f\,]
& = &
	\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(f \circ X_{i})(\omega)
	\,\overset{{\color{white}+}}{-}\,
	E[\,f \circ X\,]
\\
& \geq &
	\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})(\omega)
	\,\overset{{\color{white}+}}{-}\,
	E[\,f \circ X\,]
\\
& = &
	\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})(\omega)
	\,\overset{{\color{white}+}}{-}\,
	E[\,l_{j} \circ X\,]
	\,\overset{{\color{white}+}}{+}\,
	E[\,l_{j} \circ X\,]
	\,\overset{{\color{white}+}}{-}\,
	E[\,f \circ X\,]
\\
& \geq &
	\underset{1\leq j \leq k}{\min}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,l_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{+}\,
	E\!\left[\, l_{j} \circ X \overset{{\color{white}.}}{-} f \circ X\,\right]
\\
& \geq &
	\underset{1\leq j \leq k}{\min}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,l_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{-}\,
	E\!\left[\; \vert\, l_{j} \circ X \overset{{\color{white}.}}{-} f \circ X \,\vert \;\right]
\\
& \geq &
	\underset{1\leq j \leq k}{\min}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,l_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{-}\,
	E\!\left[\; \vert\, u_{j} \circ X \overset{{\color{white}.}}{-} l_{j} \circ X \,\vert \;\right]
\\
& \geq &
	\underset{1\leq j \leq k}{\min}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,l_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{-}\,
	\varepsilon\,.
\end{eqnarray*}
We thus see that, for $\mu$-almost every $\omega \in \Omega$,
\begin{eqnarray*}
	\underset{1\leq j \leq k}{\min}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,l_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{-}\,
	\varepsilon
& \leq &
	\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}(\omega)
\\
& := &
%
	\underset{f\in\mathcal{F}}{\sup}\left\{\,
		\left\vert\; \Delta(X,n)(\omega)[\,f\,]\,\overset{{\color{white}+}}{-}\,P_{X}[\,f\,] \;\right\vert
	\;\right\}
%\\
%& = &
%	\underset{f\in\mathcal{F}}{\sup}\left\{\;
%		\left\vert\;
%			\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(f \circ X_{i})(\omega)
%			\,\overset{{\color{white}+}}{-}\,
%			E[\,f \circ X\,]
%		\;\right\vert
%	\;\right\}
\\
& \leq &
	\underset{1\leq j \leq k}{\max}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})(\omega)
		\,\overset{{\color{white}+}}{-}\,
		E[\,u_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{+}\,
	\varepsilon\,.
\end{eqnarray*}
which implies that we have, $\mu$-almost surely,
\begin{eqnarray*}
	\underset{1\leq j \leq k}{\min}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})
		\,\overset{{\color{white}+}}{-}\,
		E[\,l_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{-}\,
	\varepsilon
& \leq &
	\left(\;\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}\,\right)_{*}
%\\
%& \leq &
\;\; \leq \;\;
	\left(\;\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}\,\right)^{*}
\\
& \leq &
	\underset{1\leq j \leq k}{\max}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})
		\,\overset{{\color{white}+}}{-}\,
		E[\,u_{j} \circ X\,]
		\;\right\}
	\,\overset{{\color{white}+}}{+}\,
	\varepsilon\,.
\end{eqnarray*}
Now, note that both
\begin{equation*}
	\underset{1\leq j \leq k}{\max}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})
		\,\overset{{\color{white}+}}{-}\,
		E[\,u_{j} \circ X\,]
	\;\right\}
\quad\textnormal{and}\quad
	\underset{1\leq j \leq k}{\min}\left\{\;
		\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})
		\,\overset{{\color{white}+}}{-}\,
		E[\,l_{j} \circ X\,]
	\;\right\}
\end{equation*}
are measurable $\Re$-valued functions defined on $(\Omega,\mathcal{A},\mu)$, and
each converges $\mu$-almost surely to zero as $n \longrightarrow \infty$,
by applying the Strong Law of Large Numbers to each of
\begin{equation*}
\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(u_{j} \circ X_{i})
\quad\textnormal{and}\quad
\dfrac{1}{n}\cdot \overset{n}{\underset{i=1}{\sum}}\,(l_{j} \circ X_{i})\,,
\quad\textnormal{for \,$j = 1, 2, \ldots, k$}
\end{equation*}
It follows that, for each \,$\varepsilon > 0$,
\begin{equation*}
\mu\!\left(\,\left\{\;
	\omega\in\Omega
\;\left\vert\;
	-\,\varepsilon
	\,\leq\,
	\underset{n\rightarrow\infty}{\liminf}
	\left(\;\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}\,\right)^{*}(\omega)
	\,\leq\,
	\underset{n\rightarrow\infty}{\limsup}
	\left(\;\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}\,\right)^{*}(\omega)
	\,\leq\,
	\varepsilon
\right.
\;\right\}\right)
\;=\; 1
\end{equation*}
This completes the proof of Claim 1.

\vskip 0.3cm
\noindent
Next, note that
\begin{eqnarray*}
&&
	\left\{\;
		\omega\in\Omega
	\;\left\vert\;
		\underset{n\rightarrow\infty}{\lim}
		\left(\;\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}\,\right)^{*}(\omega)
		\,=\,
		0
	\right.
	\;\right\}
\\
& \mathlarger{\mathlarger{=}} &
	\underset{m\in\N}{\bigcap}\;
	\left\{\;
		\omega\in\Omega
	\;\left\vert\;
		-\,\dfrac{1}{m}
		\,\leq\,
		\underset{n\rightarrow\infty}{\liminf}
		\left(\;\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}\,\right)^{*}(\omega)
		\,\leq\,
		\underset{n\rightarrow\infty}{\limsup}
		\left(\;\left\Vert\;\Delta(X,n) \,\overset{{\color{white}.}}{-}\, P_{X}\;\right\Vert_{\mathcal{F}}\,\right)^{*}(\omega)
		\,\leq\,
		\dfrac{1}{m}
	\right.
	\;\right\}
\end{eqnarray*}
But the countable intersection on the right-hand-side above has $\mu$-probability one,
by Claim 1 and the fact that a countable intersection of sets of probability one itself has probability one.
This completes the proof of the present Theorem.
\qed


          %%%%% ~~~~~~~~~~~~~~~~~~~~ %%%%%

%\renewcommand{\theenumi}{\alph{enumi}}
%\renewcommand{\labelenumi}{\textnormal{(\theenumi)}$\;\;$}
\renewcommand{\theenumi}{\roman{enumi}}
\renewcommand{\labelenumi}{\textnormal{(\theenumi)}$\;\;$}

          %%%%% ~~~~~~~~~~~~~~~~~~~~ %%%%%
