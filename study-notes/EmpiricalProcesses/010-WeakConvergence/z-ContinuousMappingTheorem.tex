
          %%%%% ~~~~~~~~~~~~~~~~~~~~ %%%%%

\section{The Mapping Theorem}
\setcounter{theorem}{0}
\setcounter{equation}{0}

%\cite{vanDerVaart1996}
%\cite{Kosorok2008}

%\renewcommand{\theenumi}{\alph{enumi}}
%\renewcommand{\labelenumi}{\textnormal{(\theenumi)}$\;\;$}
\renewcommand{\theenumi}{\roman{enumi}}
\renewcommand{\labelenumi}{\textnormal{(\theenumi)}$\;\;$}

          %%%%% ~~~~~~~~~~~~~~~~~~~~ %%%%%

\begin{theorem}[The Mapping Theorem]
\mbox{}\vskip 0.1cm
\noindent
Suppose:
\begin{itemize}
\item
	$(\Omega,\mathcal{A},\mu)$ is a probability space.
	$(\D,d)$\, is a metric space.
	$\mathcal{D}$\, is the Borel $\sigma$-algebra of $(\D,d)$.
	%\vskip 0.0cm
	%$\mathcal{M}_{1}(\D,\mathcal{D})$ is the collection of Borel probability measures
	%defined on the measurable space $(\D,\mathcal{D})$.
\item
	$X : (\Omega,\mathcal{A},\mu) \longrightarrow (\D,\mathcal{D})$
	is an $(\mathcal{A},\mathcal{D})$-measurable map.
\item
	For each $n \in \N$,
	$(\Omega_{n},\mathcal{A}_{n},\mu_{n})$ is a probability space and
	$X_{n} : \Omega_{n} \longrightarrow \D$
	is a $\D$-valued map (not necessarily Borel measurable) defined on $\Omega_{n}$.
\item
	$(\mathbb{E},\rho)$ is a metric space and $\mathcal{E}$ is its Borel $\sigma$-algebra.
	$g : \D \longrightarrow \mathbb{E}$ is a $(\mathcal{D},\mathcal{E})$-measurable map.
\item
	$D_{g} \, := \,
	\left\{\;\left.
		x\overset{{\color{white}.}}{\in}\D
		\;\;\right\vert
		\begin{array}{c}\textnormal{$g$ is not continuous at $x$}\end{array}
		\right\}$
	is the discontinuity set of $g$.
	\vskip 0.1cm
	(By Proposition \ref{DiscontinuitySetsInMetricSpacesAreBorel}, $D_{g} \subset \D$ is a Borel subset of $(\D,d)$.
	Hence, $X^{-1}(D_{g}) \in \mathcal{A}$ and $\mu\!\left(X^{-1}(D_{g})\right)$ makes sense.)
\item
	$\mu\!\left(\left\{\;\left.\omega\overset{{\color{white}.}}{\in}\Omega\;\,\right\vert\;X(\omega)\in D_{g}\;\right\}\right)$
	\;$=$\; $\mu\!\left(X^{-1}(D_{g})\right)$
	\;$=$\; $0$.
\end{itemize}
Then, \;$X_{n} \wconverge X$ \;$\Longrightarrow$\; $g \circ X_{n} \,\wconverge\, g \circ X$.
\end{theorem}
\proof

\vskip 0.5cm
\noindent
\textbf{Claim 1:}\;\;
For each closed subset $F \subset (\mathbb{E},\rho)$, we have\;
$\overline{g^{-1}(F)}$ \;$\subset$\; $g^{-1}(F)\,\cup\,D_{g}$.
\vskip 0.1cm
\noindent
Proof of Claim 1:\;\;
Note that it suffices to show that \;$x \,\in\, \overline{g^{-1}(F)} \,\cap\, (D_{g})^{c}$ \;$\Longrightarrow$\; $x \in g^{-1}(F)$.
To this end, observe:
\begin{eqnarray*}
x \,\in\, \overline{g^{-1}(F)} \,\cap\, (D_{g})^{c}
&\Longrightarrow&
	\textnormal{$g$ is continuous at $x$, and}\;\,
	\exists\;\, \{\,x_{n}\}_{n\in\N} \subset g^{-1}(F)\;\, \textnormal{such that}\;\, x_{n} \longrightarrow x
\\
&\Longrightarrow&
	\exists\;\, \{\,x_{n}\}_{n\in\N} \subset g^{-1}(F)\;\, \textnormal{such that}\;\, g(x_{n}) \longrightarrow g(x)
\\
&\Longrightarrow&
	g(x) \in F\,, \quad\textnormal{since $g(x_{n}) \in F$, for each $n\in\N$, and $F$ is a close subset of $(\mathbb{E},\rho)$}
\\
&\Longrightarrow&
	x \in g^{-1}(F)
\end{eqnarray*}
This proves Claim 1.

\vskip 0.5cm
\noindent
\textbf{Claim 2:}\;\;
For each closed subset $F \subset (\mathbb{E},\rho)$, we have\;
$\mu\!\left(X\in\overline{g^{-1}(F)}\,\right)$ \;$=$\;
$\mu\!\left(X\overset{{\color{white}.}}{\in} g^{-1}(F)\right)$.
\vskip 0.1cm
\noindent
Proof of Claim 2:\;\;
Clearly, 
$\mu\!\left(X\in\overline{g^{-1}(F)}\,\right)$ \;$\geq$\;
$\mu\!\left(X\overset{{\color{white}.}}{\in} g^{-1}(F)\right)$.
Conversely, by Claim 1, we have
\begin{equation*}
\mu\!\left(X\in\overline{g^{-1}(F)}\,\right)
\;\;\leq\;\;
	\mu\!\left(X\overset{{\color{white}.}}{\in} g^{-1}(F)\right)
	\; + \;
	\mu\!\left(X\overset{{\color{white}.}}{\in} D_{g}\right)
\;\;=\;\;
	\mu\!\left(X\overset{{\color{white}.}}{\in} g^{-1}(F)\right)
	\; + \;
	0
\;\;=\;\;
	\mu\!\left(X\overset{{\color{white}.}}{\in} g^{-1}(F)\right)
\end{equation*}
This proves Claim 2.

\vskip 0.5cm
\noindent
Lastly, note that for an arbitrary closed subset $F \subset (\mathbb{E},\rho)$, we now have
\begin{eqnarray*}
\underset{n\rightarrow\infty}{\limsup}\;\, \mu^{*}\!\left(\,g \circ X_{n} \overset{{\color{white}.}}{\in} F\,\right)
&=&
	\underset{n\rightarrow\infty}{\limsup}\;\, \mu^{*}\!\left(\,X_{n} \overset{{\color{white}.}}{\in} g^{-1}(F)\,\right)
%\\
%&\leq&
\;\; \leq \;\;
	\underset{n\rightarrow\infty}{\limsup}\;\, \mu^{*}\!\left(\,X_{n} \overset{{\color{white}.}}{\in} \overline{g^{-1}(F)}\,\right)
\\
&\leq&
	\mu\!\left(X\overset{{\color{white}.}}{\in}\overline{g^{-1}(F)}\,\right),
	\quad\textnormal{by $X_{n} \wconverge X$ and the Portmanteau Theorem}
\\
&=&
	\mu\!\left(X\overset{{\color{white}.}}{\in}g^{-1}(F)\,\right),
	\quad\textnormal{by Claim 2}
	%\mu\!\left(X^{-1}\!\left(\,\overline{g^{-1}(F)}\right)\right)
\\
&=&
	\mu\!\left(\,g \circ X\overset{{\color{white}.}}{\in}F\,\right).
\end{eqnarray*}
Since $F$ above is an arbitrary closed subset of $(\mathbb{E},\rho)$,
by the Portmanteau Theorem again, we have \;$g \circ X_{n} \wconverge g \circ X$.
This completes the proof of the Mapping Theorem.
\qed

          %%%%% ~~~~~~~~~~~~~~~~~~~~ %%%%%

%\renewcommand{\theenumi}{\alph{enumi}}
%\renewcommand{\labelenumi}{\textnormal{(\theenumi)}$\;\;$}
\renewcommand{\theenumi}{\roman{enumi}}
\renewcommand{\labelenumi}{\textnormal{(\theenumi)}$\;\;$}

          %%%%% ~~~~~~~~~~~~~~~~~~~~ %%%%%
